<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Friend Finder Survey</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.bundle.min.js"></script>

</head>


<body>

    <div class="container">
        <h2 style="margin: 20px"> Survey Questions</h2>

        <div class="row">
            <div class="col-12">

                <div class="card">
                    <div class="card-header">
                        <h3><strong>About You</strong></h3>
                    </div>
                    <div class="card-body">
                        <form method="POST" role="form">

                            <div class="form-group">
                                <label for="name">Name (Required)</label>
                                <input type="text" class="form-control" id="name">
                            </div>

                            <div class="form-group">
                                <label for="photo">Link to Photo (Required)</label>
                                <input type="link" class="form-control" id="photo">
                            </div>
                            <br>
                            <h5><strong>Question 1</strong></h5>
                            <h6>The hills are alive with the sound of music.</h6>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle btn-sm" type="button" id="question_1"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Select an Option
                                </button>
                                <div id="question_1_dropdown" class="dropdown-menu">
                                    <a class="dropdown-item" data-question="1">1 (Strongly Disagree)</a>
                                    <a class="dropdown-item" data-question="1">2</a>
                                    <a class="dropdown-item" data-question="1">3</a>
                                    <a class="dropdown-item" data-question="1">4</a>
                                    <a class="dropdown-item" data-question="1">5 (Strongly Agree)</a>
                                </div>
                            </div>
                            <br>
                            <h5><strong>Question 2</strong></h5>
                            <h6>You enjoy shadow boxing and/or robot dancing.</h6>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle btn-sm" type="button" id="question_2"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Select an Option
                                </button>
                                <div id="question_2_dropdown" class="dropdown-menu">
                                    <a class="dropdown-item" data-question="2">1 (Strongly Disagree)</a>
                                    <a class="dropdown-item" data-question="2">2</a>
                                    <a class="dropdown-item" data-question="2">3</a>
                                    <a class="dropdown-item" data-question="2">4</a>
                                    <a class="dropdown-item" data-question="2">5 (Strongly Agree)</a>
                                </div>
                            </div>
                            <br>
                            <h5><strong>Question 3</strong></h5>
                            <h6>You've got to make the good times last.</h6>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle btn-sm" type="button" id="question_3"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Select an Option
                                </button>
                                <div id="question_3_dropdown" class="dropdown-menu">
                                    <a class="dropdown-item" data-question="3">1 (Strongly Disagree)</a>
                                    <a class="dropdown-item" data-question="3">2</a>
                                    <a class="dropdown-item" data-question="3">3</a>
                                    <a class="dropdown-item" data-question="3">4</a>
                                    <a class="dropdown-item" data-question="3">5 (Strongly Agree)</a>
                                </div>
                            </div>
                            <br>
                            <h5><strong>Question 4</strong></h5>
                            <h6>The freaks come out at night.</h6>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle btn-sm" type="button" id="question_4"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Select an Option
                                </button>
                                <div id="question_4_dropdown" class="dropdown-menu">
                                    <a class="dropdown-item" data-question="4">1 (Strongly Disagree)</a>
                                    <a class="dropdown-item" data-question="4">2</a>
                                    <a class="dropdown-item" data-question="4">3</a>
                                    <a class="dropdown-item" data-question="4">4</a>
                                    <a class="dropdown-item" data-question="4">5 (Strongly Agree)</a>
                                </div>
                            </div>
                            <br>
                            <h5><strong>Question 5</strong></h5>
                            <h6>There is no business like show business.</h6>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle btn-sm" type="button" id="question_5"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Select an Option
                                </button>
                                <div id="question_5_dropdown" class="dropdown-menu">
                                    <a class="dropdown-item" data-question="5">1 (Strongly Disagree)</a>
                                    <a class="dropdown-item" data-question="5">2</a>
                                    <a class="dropdown-item" data-question="5">3</a>
                                    <a class="dropdown-item" data-question="5">4</a>
                                    <a class="dropdown-item" data-question="5">5 (Strongly Agree)</a>
                                </div>
                            </div>
                            <br>
                            <h5><strong>Question 6</strong></h5>
                            <h6>It don't mean a thing if it ain't got that swing.</h6>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle btn-sm" type="button" id="question_6"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Select an Option
                                </button>
                                <div id="question_6_dropdown" class="dropdown-menu">
                                    <a class="dropdown-item" data-question="6">1 (Strongly Disagree)</a>
                                    <a class="dropdown-item" data-question="6">2</a>
                                    <a class="dropdown-item" data-question="6">3</a>
                                    <a class="dropdown-item" data-question="6">4</a>
                                    <a class="dropdown-item" data-question="6">5 (Strongly Agree)</a>
                                </div>
                            </div>
                            <br>
                            <h5><strong>Question 7</strong></h5>
                            <h6>It's not the heat - it's the humidity.</h6>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle btn-sm" type="button" id="question_7"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Select an Option
                                </button>
                                <div id="question_7_dropdown" class="dropdown-menu">
                                    <a class="dropdown-item" data-question="7">1 (Strongly Disagree)</a>
                                    <a class="dropdown-item" data-question="7">2</a>
                                    <a class="dropdown-item" data-question="7">3</a>
                                    <a class="dropdown-item" data-question="7">4</a>
                                    <a class="dropdown-item" data-question="7">5 (Strongly Agree)</a>
                                </div>
                            </div>
                            <br>
                            <h5><strong>Question 8</strong></h5>
                            <h6>You love the smell of napalm in the morning.</h6>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle btn-sm" type="button" id="question_8"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Select an Option
                                </button>
                                <div id="question_8_dropdown" class="dropdown-menu">
                                    <a class="dropdown-item" data-question="8">1 (Strongly Disagree)</a>
                                    <a class="dropdown-item" data-question="8">2</a>
                                    <a class="dropdown-item" data-question="8">3</a>
                                    <a class="dropdown-item" data-question="8">4</a>
                                    <a class="dropdown-item" data-question="8">5 (Strongly Agree)</a>
                                </div>
                            </div>
                            <br>
                            <h5><strong>Question 9</strong></h5>
                            <h6>It's always beer-thirty.</h6>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle btn-sm" type="button" id="question_9"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Select an Option
                                </button>
                                <div id="question_9_dropdown" class="dropdown-menu">
                                    <a class="dropdown-item" data-question="9">1 (Strongly Disagree)</a>
                                    <a class="dropdown-item" data-question="9">2</a>
                                    <a class="dropdown-item" data-question="9">3</a>
                                    <a class="dropdown-item" data-question="9">4</a>
                                    <a class="dropdown-item" data-question="9">5 (Strongly Agree)</a>
                                </div>
                            </div>
                            <br>
                            <h5><strong>Question 10</strong></h5>
                            <h6>You whistle while you work.</h6>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle btn-sm" type="button" id="question_10"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Select an Option
                                </button>
                                <div id="question_10_dropdown" class="dropdown-menu">
                                    <a class="dropdown-item" data-question="10">1 (Strongly Disagree)</a>
                                    <a class="dropdown-item" data-question="10">2</a>
                                    <a class="dropdown-item" data-question="10">3</a>
                                    <a class="dropdown-item" data-question="10">4</a>
                                    <a class="dropdown-item" data-question="10">5 (Strongly Agree)</a>
                                </div>
                            </div>
                        </form>
                        <br>
                        <div>
                            <button type="submit" class="btn btn-primary btn-md btn-block" id="submit-btn"><span
                                    class="fa fa-check"></span> Submit</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col-12">
                <nav>
                    <a href="/api/friends">API Friends List &nbsp&nbsp|</a>
                    <a href="https://github.com/andyinthemachine/friend_finder">&nbsp&nbspGitHub Repo</a>
                </nav>
            </div>
        </div>
        <br>
    </div>
</body>


<script>

    // get dropdown choice text and load into parent button 
    $(".dropdown-menu").on('click', ".dropdown-item", function () {
        $(`#question_${$(this).attr("data-question")}`).html($(this).text());
    });

    $("#submit-btn").on("click", function (event) {
        event.preventDefault();

        // check to see if all questions answered

        var new_scores = [];
        var found_all_10 = true;
        var i = 0;


        while (i++ < 10 && found_all_10) {
            var answer = parseInt(($(`#question_${i}`).text().charAt(0)));
            if (isNaN(answer))
                found_all_10 = false;
            else
                new_scores.push(answer);

        }

        var new_name = $("#name").val().trim();
        var new_photo = $("#photo").val().trim();

        if (found_all_10 && new_name && new_photo) {
            alert("all questions answered");
            var new_friend = {
                name: new_name,
                photo: new_photo,
                scores: new_scores
            };
            console.log(new_friend);

            // $.post("/api/friends", new_friend)
            //     .then(function (data) {
            //         console.log("match:", data);
            //     });
        }
        else
            alert("All questions not answered");
    });

</script>

</html>